(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{63:function(e,t,a){Promise.resolve().then(a.bind(a,8813))},8813:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(7437),l=a(2265);let i=a(357).env.NEXT_PUBLIC_API_URL||"/api";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,s={"Content-Type":"application/json",...t.headers};a&&(s.Authorization="Bearer ".concat(a));let l=await fetch("".concat(i).concat(e),{...t,headers:s}),r=await l.json().catch(()=>({}));if(!l.ok)throw Error(r&&r.message||"Erro inesperado");return r}function n(e){return r("/auth/login",{method:"POST",body:JSON.stringify(e)})}function c(e){return r("/auth/register",{method:"POST",body:JSON.stringify(e)})}function o(e){let{entries:t,form:a,editingId:l,error:i,saving:r,onChange:n,onSubmit:c,onEdit:o,onCancelEdit:d,onDelete:m,summary:u}=e;return(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"uppercase tracking-[0.08em] text-emerald-300 text-xs",children:"Proje\xe7\xe3o"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:"Lan\xe7amentos futuros"}),(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Cadastre entradas e sa\xeddas previstas para enxergar o impacto no m\xeas."})]})}),(0,s.jsxs)("form",{onSubmit:c,className:"space-y-2",children:[(0,s.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["T\xedtulo",(0,s.jsx)("input",{type:"text",value:a.title,onChange:e=>n({...a,title:e.target.value}),placeholder:"Ex: IPVA, B\xf4nus, 13\xba",required:!0,className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Valor (R$)",(0,s.jsx)("input",{type:"number",step:"0.01",value:a.amount,onChange:e=>n({...a,amount:e.target.value}),required:!0,className:"input"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2 md:grid-cols-3",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Categoria",(0,s.jsx)("input",{type:"text",value:a.category,onChange:e=>n({...a,category:e.target.value}),placeholder:"Ex: imposto, extra...",className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Data prevista",(0,s.jsx)("input",{type:"date",value:a.dueDate,onChange:e=>n({...a,dueDate:e.target.value}),required:!0,className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Tipo",(0,s.jsxs)("select",{value:a.type,onChange:e=>n({...a,type:e.target.value}),className:"input",children:[(0,s.jsx)("option",{value:"expense",children:"Sa\xedda"}),(0,s.jsx)("option",{value:"income",children:"Entrada"})]})]})]}),i&&(0,s.jsx)("p",{className:"text-rose-400 text-sm",children:i}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[l&&(0,s.jsx)("button",{type:"button",className:"button-ghost",onClick:d,children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"button-primary",disabled:r,children:r?"Salvando...":l?"Atualizar":"Adicionar"})]})]}),(0,s.jsxs)("div",{className:"glass p-4 rounded-xl border border-white/10 bg-white/5 grid gap-1 md:grid-cols-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-300 uppercase tracking-[0.08em]",children:"Entradas previstas"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-emerald-300",children:["R$ ",u.totalIncomes.toFixed(2)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-300 uppercase tracking-[0.08em]",children:"Sa\xeddas previstas"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-rose-300",children:["R$ ",u.totalExpenses.toFixed(2)]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-slate-300 uppercase tracking-[0.08em]",children:"Saldo projetado"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-slate-50",children:["R$ ",u.net.toFixed(2)]})]})]}),0===t.length?(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Nenhum lan\xe7amento futuro ainda."}):(0,s.jsx)("ul",{className:"list",children:t.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"description",children:[e.title," ",(0,s.jsxs)("span",{className:"muted",children:["• ","income"===e.type?"Entrada":"Sa\xedda"," • ",new Date(e.dueDate).toLocaleDateString("pt-BR")]})]}),(0,s.jsxs)("p",{className:"muted",children:["R$ ",e.amount.toFixed(2)," ",e.category&&" • ".concat(e.category)]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("button",{className:"button-ghost",onClick:()=>o(e),children:"Editar"}),(0,s.jsx)("button",{className:"danger",onClick:()=>m(e.id),children:"Excluir"})]})]},e.id))})]})}function d(e){let{start:t,end:a,onChange:l,days:i,summary:r}=e;return(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"uppercase tracking-[0.08em] text-emerald-300 text-xs",children:"Calend\xe1rio"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:"Linha do tempo do m\xeas"}),(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Selecione in\xedcio e fim para ver os gastos por dia e o resumo do per\xedodo."})]})}),(0,s.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Data inicial",(0,s.jsx)("input",{type:"date",value:t,onChange:e=>l({start:e.target.value,end:a}),className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Data final",(0,s.jsx)("input",{type:"date",value:a,onChange:e=>l({start:t,end:e.target.value}),className:"input"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm text-slate-200",children:[(0,s.jsxs)("div",{className:"glass p-3 rounded-xl border border-white/10 bg-white/5",children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Total no per\xedodo"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-rose-300",children:["R$ ",r.total.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"glass p-3 rounded-xl border border-white/10 bg-white/5",children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"M\xe9dia por dia"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-slate-50",children:["R$ ",r.average.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"glass p-3 rounded-xl border border-white/10 bg-white/5",children:[(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Dia mais alto"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-emerald-300",children:r.highestDay?"R$ ".concat(r.highestDay.total.toFixed(2)):"—"})]})]})]}),t&&a?0===i.length?(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Nenhum gasto registrado no per\xedodo."}):(0,s.jsx)("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:i.map(e=>(0,s.jsxs)("div",{className:"relative glass p-3 rounded-xl border border-white/10 bg-white/5 group",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-slate-50",children:new Date(e.date).toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit",month:"short"})}),(0,s.jsxs)("span",{className:"text-xs text-emerald-300 font-semibold",children:["R$ ",e.total.toFixed(2)]})]}),(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Passe o mouse para ver detalhes"}),(0,s.jsxs)("div",{className:"absolute inset-0 bg-slate-900/90 rounded-xl p-3 hidden group-hover:flex flex-col gap-2 overflow-auto",children:[(0,s.jsx)("p",{className:"text-xs text-slate-300",children:"Gastos do dia"}),0===e.items.length?(0,s.jsx)("p",{className:"text-xs text-slate-400",children:"Nenhum gasto"}):(0,s.jsx)("ul",{className:"space-y-1 text-xs text-slate-200",children:e.items.map((e,t)=>(0,s.jsxs)("li",{className:"flex justify-between gap-2",children:[(0,s.jsxs)("span",{className:"truncate",children:[e.title," ",e.category?"• ".concat(e.category):""," (",e.type,")"]}),(0,s.jsxs)("span",{className:"text-rose-300 font-semibold",children:["R$ ",e.amount.toFixed(2)]})]},t))})]})]},e.date))}):(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Informe a data inicial e final para ver o calend\xe1rio."})]})}let m={name:"",email:"",password:""},u={description:"",amount:"",category:"",date:"",payCycleId:""},x={title:"",amount:"",category:"",dueDay:"1",payCycleId:""},p={name:"",payDay:"1"},h={title:"",amount:"",category:"",dueDate:"",type:"expense"},g=["Alimenta\xe7\xe3o","Supermercado/Feira","Transporte","Apps/Uber","Combust\xedvel","Lazer","Viagem","Educa\xe7\xe3o","Sa\xfade","Casa","Pets","Roupas","Emerg\xeancias","Outros"],y=["Aluguel/Condom\xednio","Energia","\xc1gua","Internet","Celular","Plano de sa\xfade","Seguro","Financiamento","Streaming","Academia","Escola/Faculdade","Outros"],j=()=>{let e=new Date;return{start:new Date(e.getFullYear(),e.getMonth(),1).toISOString().slice(0,10),end:new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().slice(0,10)}},N=()=>localStorage.getItem("token");function f(){var e;let[t,a]=(0,l.useState)("login"),[i,f]=(0,l.useState)(m),[b,v]=(0,l.useState)(!1),[S,D]=(0,l.useState)(""),[C,w]=(0,l.useState)(null),[E,T]=(0,l.useState)(N),[I,k]=(0,l.useState)([]),[F,R]=(0,l.useState)(u),[O,$]=(0,l.useState)(!1),[A,P]=(0,l.useState)(""),[L,q]=(0,l.useState)(null),[J,M]=(0,l.useState)([]),[U,V]=(0,l.useState)(x),[z,_]=(0,l.useState)(!1),[B,G]=(0,l.useState)(""),[Y,Q]=(0,l.useState)(null),[X,H]=(0,l.useState)(""),[K,W]=(0,l.useState)(!1),[Z,ee]=(0,l.useState)([]),[et,ea]=(0,l.useState)(p),[es,el]=(0,l.useState)(!1),[ei,er]=(0,l.useState)(""),[en,ec]=(0,l.useState)([]),[eo,ed]=(0,l.useState)(h),[em,eu]=(0,l.useState)(null),[ex,ep]=(0,l.useState)(!1),[eh,eg]=(0,l.useState)(""),[ey,ej]=(0,l.useState)(j),eN=(0,l.useMemo)(()=>!!E,[E]);async function ef(){if(E)try{let e=await r("/profile/me",{method:"GET"},E);w(e),H(null!=e.salary?e.salary.toString():""),localStorage.setItem("user",JSON.stringify(e))}catch(e){console.error("Erro ao buscar perfil",e)}}async function eb(){if(E){P("");try{let e=await r("/expenses",{method:"GET"},E);k(e)}catch(e){console.error(e),P("N\xe3o foi poss\xedvel carregar as despesas agora.")}}}async function ev(){if(E){G("");try{let e=await r("/obligations",{method:"GET"},E);M(e)}catch(e){console.error(e),G("N\xe3o foi poss\xedvel carregar as obriga\xe7\xf5es agora.")}}}async function eS(){if(E){er("");try{let e=await r("/pay-cycles",{method:"GET"},E);ee(e)}catch(e){console.error(e),er("N\xe3o foi poss\xedvel carregar os ciclos")}}}async function eD(){if(E){eg("");try{let e=await r("/future-entries",{method:"GET"},E);ec(e)}catch(e){console.error(e),eg("N\xe3o foi poss\xedvel carregar lan\xe7amentos futuros.")}}}async function eC(e){e.preventDefault(),v(!0),D("");try{let e="login"===t?n:c,a=await e(i);T(a.token),localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),w(a.user),f(m)}catch(e){D((null==e?void 0:e.message)||"Erro ao autenticar")}finally{v(!1)}}async function ew(e){if(e.preventDefault(),E){$(!0),P("");try{let e={description:F.description.trim(),amount:Number(F.amount),category:F.category.trim()||void 0,date:F.date?F.date:void 0,payCycleId:F.payCycleId?Number(F.payCycleId):null};if(!e.description||Number.isNaN(e.amount)){P("Descri\xe7\xe3o e valor s\xe3o obrigat\xf3rios."),$(!1);return}if(L){let t=await r("/expenses/".concat(L),{method:"PUT",body:JSON.stringify(e)},E);k(e=>e.map(e=>e.id===t.id?t:e))}else{let t=await r("/expenses",{method:"POST",body:JSON.stringify(e)},E);k(e=>[t,...e])}R(u),q(null)}catch(e){P((null==e?void 0:e.message)||"Erro ao salvar despesa")}finally{$(!1)}}}async function eE(e){if(E&&confirm("Deseja excluir esta despesa?"))try{await r("/expenses/".concat(e),{method:"DELETE"},E),k(t=>t.filter(t=>t.id!==e))}catch(e){P((null==e?void 0:e.message)||"Erro ao excluir despesa")}}async function eT(e){if(e.preventDefault(),!E)return;el(!0),er("");let t=Number(et.payDay);if(!et.name||Number.isNaN(t)||t<1||t>31){er("Informe nome e dia entre 1 e 31"),el(!1);return}try{var a;let e=await (a={name:et.name,payDay:t},r("/pay-cycles",{method:"POST",body:JSON.stringify(a)},E));ee(t=>[...t,e].sort((e,t)=>e.payDay-t.payDay)),ea(p)}catch(e){er((null==e?void 0:e.message)||"Erro ao criar ciclo")}finally{el(!1)}}async function eI(e){if(E&&confirm("Excluir ciclo de pagamento? Itens associados perder\xe3o a vincula\xe7\xe3o."))try{await r("/pay-cycles/".concat(e),{method:"DELETE"},E),ee(t=>t.filter(t=>t.id!==e)),M(t=>t.map(t=>t.payCycleId===e?{...t,payCycleId:null}:t)),k(t=>t.map(t=>t.payCycleId===e?{...t,payCycleId:null}:t))}catch(e){er((null==e?void 0:e.message)||"Erro ao excluir ciclo")}}async function ek(e){if(e.preventDefault(),!E)return;let t=parseFloat(X);if(Number.isNaN(t)||t<0){G("Sal\xe1rio inv\xe1lido");return}W(!0);try{let e=await r("/profile/salary",{method:"PUT",body:JSON.stringify({salary:t})},E);w(e),localStorage.setItem("user",JSON.stringify(e))}catch(e){console.error(e),G("Erro ao salvar sal\xe1rio")}finally{W(!1)}}async function eF(e){if(e.preventDefault(),!E)return;_(!0),G("");let t={title:U.title.trim(),amount:Number(U.amount),category:U.category.trim()||void 0,dueDay:Number(U.dueDay),payCycleId:U.payCycleId?Number(U.payCycleId):null};if(!t.title||Number.isNaN(t.amount)||Number.isNaN(t.dueDay)){G("Preencha t\xedtulo, valor e dia."),_(!1);return}try{if(Y){let e=await r("/obligations/".concat(Y),{method:"PUT",body:JSON.stringify(t)},E);M(t=>t.map(t=>t.id===e.id?e:t))}else{let e=await r("/obligations",{method:"POST",body:JSON.stringify(t)},E);M(t=>[...t,e].sort((e,t)=>e.dueDay-t.dueDay))}V(x),Q(null)}catch(e){G((null==e?void 0:e.message)||"Erro ao salvar obriga\xe7\xe3o")}finally{_(!1)}}async function eR(e){if(E&&confirm("Deseja excluir esta obriga\xe7\xe3o fixa?"))try{await r("/obligations/".concat(e),{method:"DELETE"},E),M(t=>t.filter(t=>t.id!==e))}catch(e){G((null==e?void 0:e.message)||"Erro ao excluir obriga\xe7\xe3o")}}async function eO(e){if(e.preventDefault(),!E)return;ep(!0),eg("");let t={title:eo.title.trim(),amount:Number(eo.amount),category:eo.category.trim()||void 0,dueDate:eo.dueDate,type:eo.type};if(!t.title||Number.isNaN(t.amount)||!t.dueDate){eg("Preencha t\xedtulo, valor e data."),ep(!1);return}try{if(em){let e=await r("/future-entries/".concat(em),{method:"PUT",body:JSON.stringify(t)},E);ec(t=>t.map(t=>t.id===e.id?e:t))}else{let e=await r("/future-entries",{method:"POST",body:JSON.stringify(t)},E);ec(t=>[...t,e].sort((e,t)=>new Date(e.dueDate).getTime()-new Date(t.dueDate).getTime()))}ed(h),eu(null)}catch(e){eg((null==e?void 0:e.message)||"Erro ao salvar lan\xe7amento futuro")}finally{ep(!1)}}async function e$(e){if(E&&confirm("Deseja excluir este lan\xe7amento futuro?"))try{await r("/future-entries/".concat(e),{method:"DELETE"},E),ec(t=>t.filter(t=>t.id!==e))}catch(e){eg((null==e?void 0:e.message)||"Erro ao excluir lan\xe7amento futuro")}}(0,l.useEffect)(()=>{E&&(function(){let e=localStorage.getItem("user");if(e)try{w(JSON.parse(e))}catch(e){console.warn("Unable to read stored user",e)}}(),ef(),eb(),ev(),eS(),eD())},[E]);let eA=null!==(e=null==C?void 0:C.salary)&&void 0!==e?e:0,eP=J.reduce((e,t)=>e+t.amount,0),eL=en.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),eq=en.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),eJ=I.reduce((e,t)=>e+t.amount,0),eM=eA-eP-eJ,eU=Math.max(0,eP+eJ-eA),eV=eA>0?Math.min(100,eP/eA*100):0,ez=eA>0?Math.min(100-eV,eJ/eA*100):0,e_=(0,l.useMemo)(()=>{if(!ey.start||!ey.end)return{days:[],total:0,average:0,highestDay:null};let e=new Date(ey.start),t=new Date(ey.end);if(Number.isNaN(e.getTime())||Number.isNaN(t.getTime())||e>t)return{days:[],total:0,average:0,highestDay:null};let a={},s=(e,t)=>{a[e]||(a[e]=[]),a[e].push(t)};I.forEach(a=>{if(!a.date)return;let l=a.date.slice(0,10),i=new Date(l);i>=e&&i<=t&&s(l,{title:a.description,amount:a.amount,category:a.category,type:"Despesa"})}),en.filter(e=>"expense"===e.type).forEach(a=>{let l=a.dueDate.slice(0,10),i=new Date(l);i>=e&&i<=t&&s(l,{title:a.title,amount:a.amount,category:a.category,type:"Futuro"})});let l=new Date(e);for(;l<=t;){let e=l.getDate(),t=l.toISOString().slice(0,10);J.forEach(a=>{a.dueDay===e&&s(t,{title:a.title,amount:a.amount,category:a.category,type:"Obriga\xe7\xe3o"})}),l.setDate(l.getDate()+1)}let i=[],r=new Date(e);for(;r<=t;){let e=r.toISOString().slice(0,10),t=a[e]||[],s=t.reduce((e,t)=>e+t.amount,0);i.push({date:e,total:s,items:t}),r.setDate(r.getDate()+1)}let n=i.reduce((e,t)=>e+t.total,0),c=i.length?n/i.length:0,o=i.reduce((e,t)=>e&&e.total>=t.total?e:t,i[0]||null);return{days:i,total:n,average:c,highestDay:o}},[ey,I,J,en]),eB=Z.map(e=>{let t=J.filter(t=>t.payCycleId===e.id).reduce((e,t)=>e+t.amount,0),a=I.filter(t=>t.payCycleId===e.id).reduce((e,t)=>e+t.amount,0);return{cycle:e,fixed:t,variable:a,total:t+a}});return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 pb-10 pt-8 space-y-6",children:[(0,s.jsxs)("div",{className:"glass p-6 md:p-8 space-y-3",children:[(0,s.jsx)("p",{className:"uppercase tracking-[0.08em] text-emerald-300 text-xs",children:"Controle de Gastos"}),(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-slate-50",children:"Veja para onde seu dinheiro vai e planeje o m\xeas sem sustos."}),(0,s.jsx)("p",{className:"text-slate-300 max-w-3xl",children:"Cadastre suas despesas, obriga\xe7\xf5es fixas e defina seu sal\xe1rio para ter clareza do que sobra."})]}),eN?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:[(0,s.jsx)("section",{className:"glass p-5 space-y-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"uppercase tracking-[0.08em] text-emerald-300 text-xs",children:"Bem-vindo(a)"}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-slate-50",children:null==C?void 0:C.name}),(0,s.jsx)("p",{className:"text-slate-300",children:null==C?void 0:C.email})]}),(0,s.jsx)("button",{className:"button-ghost",onClick:function(){T(null),w(null),localStorage.removeItem("token"),localStorage.removeItem("user"),k([]),M([]),ee([])},children:"Sair"})]})}),(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:"Sal\xe1rio e meta do m\xeas"}),(0,s.jsxs)("form",{onSubmit:ek,className:"space-y-2",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Sal\xe1rio l\xedquido (R$)",(0,s.jsx)("input",{type:"number",step:"0.01",value:X,onChange:e=>H(e.target.value),placeholder:"Ex: 4500",className:"input"})]}),(0,s.jsx)("button",{type:"submit",className:"button-primary",disabled:K,children:K?"Salvando...":"Salvar sal\xe1rio"})]}),(0,s.jsx)("div",{className:"space-y-3",children:eA>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"space-y-1 text-sm text-slate-200",children:[(0,s.jsxs)("p",{children:["Obriga\xe7\xf5es: R$ ",eP.toFixed(2)]}),(0,s.jsxs)("p",{children:["Vari\xe1veis: R$ ",eJ.toFixed(2)]}),(0,s.jsxs)("p",{children:["Sobra: R$ ",eM.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-300",children:[(0,s.jsx)("span",{children:"Distribui\xe7\xe3o do sal\xe1rio"}),eU>0?(0,s.jsxs)("span",{className:"text-rose-300",children:["D\xe9ficit: R$ ",eU.toFixed(2)]}):(0,s.jsxs)("span",{className:"text-emerald-300",children:["Sobra: R$ ",eM.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"h-3 w-full rounded-full bg-white/10 overflow-hidden flex",children:[(0,s.jsx)("div",{className:"h-full bg-rose-400",style:{width:"".concat(eV,"%")}}),(0,s.jsx)("div",{className:"h-full bg-sky-400",style:{width:"".concat(ez,"%")}}),(0,s.jsx)("div",{className:"h-full bg-emerald-300",style:{width:"".concat(eA>0?Math.max(0,100-eV-ez):0,"%")}})]}),(0,s.jsxs)("div",{className:"flex justify-between text-[11px] text-slate-400",children:[(0,s.jsxs)("span",{children:["Fixas: R$ ",eP.toFixed(2)]}),(0,s.jsxs)("span",{children:["Vari\xe1veis: R$ ",eJ.toFixed(2)]}),(0,s.jsxs)("span",{children:["Sobra: R$ ",Math.max(0,eM).toFixed(2)]})]})]})]}):(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Defina seu sal\xe1rio para ver a divis\xe3o do m\xeas."})})]}),(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"uppercase tracking-[0.08em] text-emerald-300 text-xs",children:"Ciclos de pagamento"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:"Mapeie seus sal\xe1rios"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"button",className:"button-ghost",onClick:()=>ea({name:"Sal\xe1rio 25",payDay:"25"}),children:"Usar dia 25"}),(0,s.jsx)("button",{type:"button",className:"button-ghost",onClick:()=>ea({name:"Sal\xe1rio 1-10",payDay:"5"}),children:"Usar dia 1-10"})]})]}),(0,s.jsxs)("form",{onSubmit:eT,className:"space-y-2",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Nome do ciclo",(0,s.jsx)("input",{type:"text",value:et.name,onChange:e=>ea({...et,name:e.target.value}),placeholder:"Ex: Sal\xe1rio 25",required:!0,className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Dia do m\xeas",(0,s.jsx)("input",{type:"number",min:"1",max:"31",value:et.payDay,onChange:e=>ea({...et,payDay:e.target.value}),required:!0,className:"input"})]}),ei&&(0,s.jsx)("p",{className:"text-rose-400 text-sm",children:ei}),(0,s.jsx)("button",{type:"submit",className:"button-primary",disabled:es,children:es?"Salvando...":"Salvar ciclo"})]}),Z.length>0&&(0,s.jsx)("ul",{className:"list mt-2",children:Z.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"description",children:[e.name," ",(0,s.jsxs)("span",{className:"muted",children:["- dia ",e.payDay]})]})}),(0,s.jsx)("div",{className:"row",children:(0,s.jsx)("button",{className:"danger",onClick:()=>eI(e.id),children:"Excluir"})})]},e.id))})]})]}),Z.length>0&&(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"uppercase tracking-[0.08em] text-emerald-300 text-xs",children:"Aloca\xe7\xe3o por sal\xe1rio"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:"Quanto cada ciclo j\xe1 pagou"})]})}),(0,s.jsx)("ul",{className:"list",children:eB.map(e=>{let{cycle:t,fixed:a,variable:l,total:i}=e;return(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"description",children:[t.name," ",(0,s.jsxs)("span",{className:"muted",children:["- dia ",t.payDay]})]}),(0,s.jsxs)("p",{className:"muted",children:["Fixas: R$ ",a.toFixed(2)," - Vari\xe1veis: R$ ",l.toFixed(2)," - Total: R$ ",i.toFixed(2)]})]}),eA>0&&(0,s.jsx)("div",{children:(0,s.jsxs)("p",{className:"muted",children:["Cobertura: ",Math.min(100,i/eA*100).toFixed(0),"%"]})})]},t.id)})})]}),(0,s.jsx)(o,{entries:en,form:eo,editingId:em,error:eh,saving:ex,onChange:ed,onSubmit:eO,onEdit:function(e){ed({title:e.title,amount:e.amount.toString(),category:e.category||"",dueDate:e.dueDate.slice(0,10),type:"income"===e.type?"income":"expense"}),eu(e.id)},onCancelEdit:()=>{ed(h),eu(null),eg("")},onDelete:e$,summary:{totalExpenses:eL,totalIncomes:eq,net:eM-eL+eq}}),(0,s.jsx)(d,{start:ey.start,end:ey.end,onChange:ej,days:e_.days,summary:{total:e_.total,average:e_.average,highestDay:e_.highestDay}}),(0,s.jsxs)("div",{className:"grid gap-4 xl:grid-cols-3",children:[(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:Y?"Editar obriga\xe7\xe3o fixa":"Adicionar obriga\xe7\xe3o fixa"}),(0,s.jsxs)("form",{onSubmit:eF,className:"space-y-2",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Nome",(0,s.jsx)("input",{type:"text",value:U.title,onChange:e=>V({...U,title:e.target.value}),placeholder:"Aluguel, Internet, Escola...",required:!0,className:"input"})]}),(0,s.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Valor (R$)",(0,s.jsx)("input",{type:"number",step:"0.01",value:U.amount,onChange:e=>V({...U,amount:e.target.value}),required:!0,className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Categoria",(0,s.jsx)("input",{type:"text",value:U.category,onChange:e=>V({...U,category:e.target.value}),list:"obligation-categories",placeholder:"Moradia, Contas...",className:"input"}),(0,s.jsx)("datalist",{id:"obligation-categories",children:y.map(e=>(0,s.jsx)("option",{value:e},e))})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Sal\xe1rio / Ciclo",(0,s.jsxs)("select",{value:U.payCycleId,onChange:e=>V({...U,payCycleId:e.target.value}),className:"input",children:[(0,s.jsx)("option",{value:"",children:"Sem ciclo"}),Z.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (dia ",e.payDay,")"]},e.id))]})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Dia de vencimento",(0,s.jsx)("input",{type:"number",min:"1",max:"31",value:U.dueDay,onChange:e=>V({...U,dueDay:e.target.value}),required:!0,className:"input"})]})]}),B&&(0,s.jsx)("p",{className:"text-rose-400 text-sm",children:B}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[Y&&(0,s.jsx)("button",{type:"button",className:"button-ghost",onClick:()=>{V(x),Q(null)},children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"button-primary",disabled:z,children:z?"Salvando...":Y?"Atualizar":"Adicionar"})]})]})]}),(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:"Vis\xe3o r\xe1pida"}),(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Distribui\xe7\xe3o do m\xeas entre fixas, vari\xe1veis e sobra."}),(0,s.jsxs)("div",{className:"space-y-1 text-sm text-slate-200",children:[(0,s.jsxs)("p",{children:["Fixas: R$ ",eP.toFixed(2)]}),(0,s.jsxs)("p",{children:["Vari\xe1veis: R$ ",eJ.toFixed(2)]}),(0,s.jsxs)("p",{children:["Sobra: R$ ",eM.toFixed(2)]})]}),Z.length>0&&(0,s.jsx)("ul",{className:"space-y-2",children:eB.map(e=>{let{cycle:t,total:a}=e;return(0,s.jsxs)("li",{className:"border border-white/10 rounded-lg px-3 py-2 bg-white/5",children:[(0,s.jsx)("p",{className:"description",children:t.name}),(0,s.jsxs)("p",{className:"muted",children:["Dia ",t.payDay," - Alocado: R$ ",a.toFixed(2)]})]},t.id)})})]}),(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:L?"Editar despesa":"Adicionar despesa vari\xe1vel"}),(0,s.jsxs)("form",{onSubmit:ew,className:"space-y-2",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Descri\xe7\xe3o",(0,s.jsx)("input",{type:"text",value:F.description,onChange:e=>R({...F,description:e.target.value}),placeholder:"Ex: Almo\xe7o, Uber...",required:!0,className:"input"})]}),(0,s.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Valor (R$)",(0,s.jsx)("input",{type:"number",step:"0.01",value:F.amount,onChange:e=>R({...F,amount:e.target.value}),placeholder:"0,00",required:!0,className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Categoria",(0,s.jsx)("input",{type:"text",value:F.category,onChange:e=>R({...F,category:e.target.value}),list:"expense-categories",placeholder:"Transporte, Lazer...",className:"input"}),(0,s.jsx)("datalist",{id:"expense-categories",children:g.map(e=>(0,s.jsx)("option",{value:e},e))})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Sal\xe1rio / Ciclo",(0,s.jsxs)("select",{value:F.payCycleId,onChange:e=>R({...F,payCycleId:e.target.value}),className:"input",children:[(0,s.jsx)("option",{value:"",children:"Sem ciclo"}),Z.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.name," (dia ",e.payDay,")"]},e.id))]})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Data",(0,s.jsx)("input",{type:"date",value:F.date,onChange:e=>R({...F,date:e.target.value}),className:"input"})]})]}),A&&(0,s.jsx)("p",{className:"text-rose-400 text-sm",children:A}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[L&&(0,s.jsx)("button",{type:"button",className:"button-ghost",onClick:()=>{R(u),q(null)},children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",className:"button-primary",disabled:O,children:O?"Salvando...":L?"Atualizar":"Adicionar"})]})]})]})]}),(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"uppercase tracking-[0.08em] text-emerald-300 text-xs",children:"Obriga\xe7\xf5es fixas"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:"Resumo do m\xeas"})]}),(0,s.jsx)("button",{className:"button-ghost",onClick:ev,children:"Atualizar"})]}),0===J.length?(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Nenhuma obriga\xe7\xe3o cadastrada ainda."}):(0,s.jsx)("ul",{className:"list",children:J.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"description",children:[e.title," ",(0,s.jsxs)("span",{className:"muted",children:["- dia ",e.dueDay]})]}),(0,s.jsxs)("p",{className:"muted",children:["R$ ",e.amount.toFixed(2)," ",e.category&&" - ".concat(e.category)]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("button",{className:"button-ghost",onClick:()=>{V({title:e.title,amount:e.amount.toString(),category:e.category||"",dueDay:e.dueDay.toString(),payCycleId:e.payCycleId?e.payCycleId.toString():""}),Q(e.id)},children:"Editar"}),(0,s.jsx)("button",{className:"danger",onClick:()=>eR(e.id),children:"Excluir"})]})]},e.id))})]}),(0,s.jsxs)("section",{className:"glass p-5 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"uppercase tracking-[0.08em] text-emerald-300 text-xs",children:"Despesas vari\xe1veis"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-50",children:"Controle r\xe1pido"})]}),(0,s.jsx)("button",{className:"button-ghost",onClick:eb,children:"Atualizar"})]}),0===I.length?(0,s.jsx)("p",{className:"text-slate-300 text-sm",children:"Nenhuma despesa cadastrada ainda."}):(0,s.jsx)("ul",{className:"list",children:I.map(e=>(0,s.jsxs)("li",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"description",children:e.description}),(0,s.jsxs)("p",{className:"muted",children:["R$ ",e.amount.toFixed(2)," ",e.category&&" - ".concat(e.category)," - ",new Date(e.date).toLocaleDateString("pt-BR")]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)("button",{className:"button-ghost",onClick:()=>{R({description:e.description,amount:e.amount.toString(),category:e.category||"",date:e.date?e.date.slice(0,10):"",payCycleId:e.payCycleId?e.payCycleId.toString():""}),q(e.id)},children:"Editar"}),(0,s.jsx)("button",{className:"danger",onClick:()=>eE(e.id),children:"Excluir"})]})]},e.id))})]})]}):(0,s.jsxs)("section",{className:"glass p-6 space-y-4 max-w-3xl mx-auto",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 border border-white/10 rounded-xl overflow-hidden",children:[(0,s.jsx)("button",{className:"py-3 text-sm font-semibold ".concat("login"===t?"bg-emerald-300 text-slate-900":"text-slate-100"),onClick:()=>{a("login"),D("")},children:"Entrar"}),(0,s.jsx)("button",{className:"py-3 text-sm font-semibold ".concat("register"===t?"bg-emerald-300 text-slate-900":"text-slate-100"),onClick:()=>{a("register"),D("")},children:"Criar conta"})]}),(0,s.jsxs)("form",{onSubmit:eC,className:"space-y-3",children:["register"===t&&(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Nome",(0,s.jsx)("input",{type:"text",value:i.name,onChange:e=>f({...i,name:e.target.value}),placeholder:"Seu nome",required:!0,className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["E-mail",(0,s.jsx)("input",{type:"email",value:i.email,onChange:e=>f({...i,email:e.target.value}),placeholder:"voce@email.com",required:!0,className:"input"})]}),(0,s.jsxs)("label",{className:"space-y-1 text-sm text-slate-200",children:["Senha",(0,s.jsx)("input",{type:"password",value:i.password,onChange:e=>f({...i,password:e.target.value}),placeholder:"******",required:!0,className:"input"})]}),S&&(0,s.jsx)("p",{className:"text-rose-400 text-sm",children:S}),(0,s.jsx)("button",{type:"submit",className:"button-primary",disabled:b,children:b?"Carregando...":"login"===t?"Entrar":"Registrar"})]})]})]})}},357:function(e,t,a){"use strict";var s,l;e.exports=(null==(s=a.g.process)?void 0:s.env)&&"object"==typeof(null==(l=a.g.process)?void 0:l.env)?a.g.process:a(8081)},8081:function(e){!function(){var t={229:function(e){var t,a,s,l=e.exports={};function i(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function n(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{a="function"==typeof clearTimeout?clearTimeout:r}catch(e){a=r}}();var c=[],o=!1,d=-1;function m(){o&&s&&(o=!1,s.length?c=s.concat(c):d=-1,c.length&&u())}function u(){if(!o){var e=n(m);o=!0;for(var t=c.length;t;){for(s=c,c=[];++d<t;)s&&s[d].run();d=-1,t=c.length}s=null,o=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===r||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function x(e,t){this.fun=e,this.array=t}function p(){}l.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new x(e,t)),1!==c.length||o||n(u)},x.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=p,l.addListener=p,l.once=p,l.off=p,l.removeListener=p,l.removeAllListeners=p,l.emit=p,l.prependListener=p,l.prependOnceListener=p,l.listeners=function(e){return[]},l.binding=function(e){throw Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw Error("process.chdir is not supported")},l.umask=function(){return 0}}},a={};function s(e){var l=a[e];if(void 0!==l)return l.exports;var i=a[e]={exports:{}},r=!0;try{t[e](i,i.exports,s),r=!1}finally{r&&delete a[e]}return i.exports}s.ab="//";var l=s(229);e.exports=l}()}},function(e){e.O(0,[971,23,744],function(){return e(e.s=63)}),_N_E=e.O()}]);