"use strict";(()=>{var e={};e.id=464,e.ids=[464],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},1747:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>b,patchFetch:()=>h,requestAsyncStorage:()=>N,routeModule:()=>m,serverHooks:()=>x,staticGenerationAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{DELETE:()=>g,PUT:()=>c,dynamic:()=>d,revalidate:()=>p});var o=r(9303),i=r(8716),a=r(670),n=r(7070),u=r(3493),l=r(9178);let d="force-dynamic",p=0;async function c(e,{params:t}){let r=(0,l.W)(e.headers.get("authorization"));if(!r)return n.NextResponse.json({message:"N\xe3o autorizado"},{status:401});let s=Number(t.id);if(Number.isNaN(s))return n.NextResponse.json({message:"ID inv\xe1lido"},{status:400});let{title:o,amount:i,category:a,dueDay:d,payCycleId:p}=await e.json(),c={};if(void 0!==o&&(c.title=o),void 0!==a&&(c.category=a||null),void 0!==i){let e=parseFloat(i);if(Number.isNaN(e))return n.NextResponse.json({message:"Valor inv\xe1lido"},{status:400});c.amount=e}if(void 0!==d){let e=Number(d);if(Number.isNaN(e))return n.NextResponse.json({message:"Dia inv\xe1lido"},{status:400});c.dueDay=e}if(void 0!==p){if(null===p||""===p)c.payCycleId=null;else{let e=Number(p);if(Number.isNaN(e))return n.NextResponse.json({message:"Ciclo de pagamento inv\xe1lido"},{status:400});let t=await u._.payCycle.findUnique({where:{id:e}});if(!t||t.userId!==r)return n.NextResponse.json({message:"Ciclo de pagamento n\xe3o encontrado"},{status:404});c.payCycleId=e}}try{let e=await u._.obligation.findUnique({where:{id:s}});if(!e||e.userId!==r)return n.NextResponse.json({message:"Obriga\xe7\xe3o n\xe3o encontrada"},{status:404});let t=await u._.obligation.update({where:{id:s},data:c});return n.NextResponse.json(t)}catch(e){return console.error("Erro ao atualizar obriga\xe7\xe3o",e),n.NextResponse.json({message:"Erro interno ao atualizar"},{status:500})}}async function g(e,{params:t}){let r=(0,l.W)(e.headers.get("authorization"));if(!r)return n.NextResponse.json({message:"N\xe3o autorizado"},{status:401});let s=Number(t.id);if(Number.isNaN(s))return n.NextResponse.json({message:"ID inv\xe1lido"},{status:400});try{let e=await u._.obligation.findUnique({where:{id:s}});if(!e||e.userId!==r)return n.NextResponse.json({message:"Obriga\xe7\xe3o n\xe3o encontrada"},{status:404});return await u._.obligation.delete({where:{id:s}}),n.NextResponse.json({},{status:204})}catch(e){return console.error("Erro ao excluir obriga\xe7\xe3o",e),n.NextResponse.json({message:"Erro interno ao excluir obriga\xe7\xe3o"},{status:500})}}let m=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/obligations/[id]/route",pathname:"/api/obligations/[id]",filename:"route",bundlePath:"app/api/obligations/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\controle-gastos\\backend\\app\\api\\obligations\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:N,staticGenerationAsyncStorage:f,serverHooks:x}=m,b="/api/obligations/[id]/route";function h(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:f})}},9178:(e,t,r)=>{r.d(t,{R:()=>a,W:()=>n});var s=r(1482),o=r.n(s);let i=process.env.JWT_SECRET||"change-me";function a(e){return o().sign({userId:e},i,{expiresIn:"7d"})}function n(e){if(!e||!e.startsWith("Bearer "))return null;let t=e.split(" ")[1];try{return o().verify(t,i).userId}catch(e){return null}}},3493:(e,t,r)=>{r.d(t,{_:()=>o});let s=require("@prisma/client"),o=globalThis.prisma||new s.PrismaClient({log:["error","warn"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,547],()=>r(1747));module.exports=s})();