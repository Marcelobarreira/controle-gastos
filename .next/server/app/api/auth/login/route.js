"use strict";(()=>{var e={};e.id=873,e.ids=[873],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},7187:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>v,patchFetch:()=>q,requestAsyncStorage:()=>h,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>x});var a={};t.r(a),t.d(a,{POST:()=>m,dynamic:()=>c,revalidate:()=>d});var s=t(9303),n=t(8716),i=t(670),o=t(7070),u=t(8691),p=t(3493),l=t(9178);let c="force-dynamic",d=0;async function m(e){let{email:r,password:t}=await e.json();if(!r||!t)return o.NextResponse.json({message:"E-mail e senha s\xe3o obrigat\xf3rios"},{status:400});try{let e=await p._.user.findUnique({where:{email:r}});if(!e||!await u.ZP.compare(t,e.password))return o.NextResponse.json({message:"Credenciais inv\xe1lidas"},{status:401});let a=(0,l.R)(e.id);return o.NextResponse.json({token:a,user:{id:e.id,name:e.name,email:e.email}})}catch(e){return console.error("Erro ao autenticar usu\xe1rio",e),o.NextResponse.json({message:"Erro interno ao autenticar"},{status:500})}}let g=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/login/route",pathname:"/api/auth/login",filename:"route",bundlePath:"app/api/auth/login/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\controle-gastos\\backend\\app\\api\\auth\\login\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:h,staticGenerationAsyncStorage:x,serverHooks:f}=g,v="/api/auth/login/route";function q(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:x})}},9178:(e,r,t)=>{t.d(r,{R:()=>i,W:()=>o});var a=t(1482),s=t.n(a);let n=process.env.JWT_SECRET||"change-me";function i(e){return s().sign({userId:e},n,{expiresIn:"7d"})}function o(e){if(!e||!e.startsWith("Bearer "))return null;let r=e.split(" ")[1];try{return s().verify(r,n).userId}catch(e){return null}}},3493:(e,r,t)=>{t.d(r,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma||new a.PrismaClient({log:["error","warn"]})}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[948,547,691],()=>t(7187));module.exports=a})();