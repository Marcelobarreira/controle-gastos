"use strict";(()=>{var e={};e.id=371,e.ids=[371],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},2543:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>R,requestAsyncStorage:()=>y,routeModule:()=>x,serverHooks:()=>h,staticGenerationAsyncStorage:()=>N});var a={};r.r(a),r.d(a,{GET:()=>f,POST:()=>g,dynamic:()=>d,revalidate:()=>c});var s=r(9303),n=r(8716),o=r(670),u=r(7070),i=r(3493),l=r(9178),p=r(1501);let d="force-dynamic",c=0,m=["expense","income"];async function f(e){let t=(0,l.W)(e.headers.get("authorization"));if(!t)return u.NextResponse.json({message:"N\xe3o autorizado"},{status:401});try{let e=await i._.futureEntry.findMany({where:{userId:t},orderBy:{dueDate:"asc"}});return u.NextResponse.json(e.map(p.I))}catch(e){return console.error("Erro ao listar lan\xe7amentos futuros",e),u.NextResponse.json({message:"Erro interno ao listar lan\xe7amentos futuros"},{status:500})}}async function g(e){let t=(0,l.W)(e.headers.get("authorization"));if(!t)return u.NextResponse.json({message:"N\xe3o autorizado"},{status:401});let{title:r,amount:a,category:s,dueDate:n,type:o}=await e.json();if(!r||null==a||!n)return u.NextResponse.json({message:"T\xedtulo, valor e data s\xe3o obrigat\xf3rios"},{status:400});let d=parseFloat(a);if(Number.isNaN(d))return u.NextResponse.json({message:"Valor inv\xe1lido"},{status:400});let c=new Date(n);if(Number.isNaN(c.getTime()))return u.NextResponse.json({message:"Data inv\xe1lida"},{status:400});let f=o&&m.includes(o)?o:"expense";try{let e=await i._.futureEntry.create({data:{title:r,amount:d,category:s||null,dueDate:c,type:f,userId:t}});return u.NextResponse.json((0,p.I)(e),{status:201})}catch(e){return console.error("Erro ao criar lan\xe7amento futuro",e),u.NextResponse.json({message:"Erro interno ao criar lan\xe7amento futuro"},{status:500})}}let x=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/future-entries/route",pathname:"/api/future-entries",filename:"route",bundlePath:"app/api/future-entries/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\controle-gastos\\backend\\app\\api\\future-entries\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:N,serverHooks:h}=x,v="/api/future-entries/route";function R(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:N})}},9178:(e,t,r)=>{r.d(t,{R:()=>o,W:()=>u});var a=r(1482),s=r.n(a);let n=process.env.JWT_SECRET||"change-me";function o(e){return s().sign({userId:e},n,{expiresIn:"7d"})}function u(e){if(!e||!e.startsWith("Bearer "))return null;let t=e.split(" ")[1];try{return s().verify(t,n).userId}catch(e){return null}}},1501:(e,t,r)=>{r.d(t,{I:()=>a});function a(e){let t=e.amount&&"function"==typeof e.amount.toNumber?e.amount.toNumber():Number(e.amount);return{id:e.id,title:e.title,amount:t,category:e.category,dueDate:e.dueDate,type:e.type,userId:e.userId,createdAt:e.createdAt,updatedAt:e.updatedAt}}},3493:(e,t,r)=>{r.d(t,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma||new a.PrismaClient({log:["error","warn"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,547],()=>r(2543));module.exports=a})();