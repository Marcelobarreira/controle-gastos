"use strict";(()=>{var e={};e.id=58,e.ids=[58],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},4216:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>R,requestAsyncStorage:()=>g,routeModule:()=>x,serverHooks:()=>h,staticGenerationAsyncStorage:()=>v});var s={};r.r(s),r.d(s,{DELETE:()=>N,PUT:()=>f,dynamic:()=>p,revalidate:()=>m});var n=r(9303),a=r(8716),o=r(670),u=r(7070),i=r(3493),d=r(9178),l=r(1501);let p="force-dynamic",m=0,c=["expense","income"];async function f(e,{params:t}){let r=(0,d.W)(e.headers.get("authorization"));if(!r)return u.NextResponse.json({message:"N\xe3o autorizado"},{status:401});let s=Number(t.id);if(Number.isNaN(s))return u.NextResponse.json({message:"ID inv\xe1lido"},{status:400});let n={},{title:a,amount:o,category:p,dueDate:m,type:f}=await e.json();if(void 0!==a&&(n.title=a),void 0!==p&&(n.category=p||null),void 0!==o){let e=parseFloat(o);if(Number.isNaN(e))return u.NextResponse.json({message:"Valor inv\xe1lido"},{status:400});n.amount=e}if(void 0!==m){let e=new Date(m);if(Number.isNaN(e.getTime()))return u.NextResponse.json({message:"Data inv\xe1lida"},{status:400});n.dueDate=e}if(void 0!==f){if(!c.includes(f))return u.NextResponse.json({message:"Tipo inv\xe1lido"},{status:400});n.type=f}try{let e=await i._.futureEntry.findUnique({where:{id:s}});if(!e||e.userId!==r)return u.NextResponse.json({message:"Lan\xe7amento futuro n\xe3o encontrado"},{status:404});let t=await i._.futureEntry.update({where:{id:s},data:n});return u.NextResponse.json((0,l.I)(t))}catch(e){return console.error("Erro ao atualizar lan\xe7amento futuro",e),u.NextResponse.json({message:"Erro interno ao atualizar lan\xe7amento futuro"},{status:500})}}async function N(e,{params:t}){let r=(0,d.W)(e.headers.get("authorization"));if(!r)return u.NextResponse.json({message:"N\xe3o autorizado"},{status:401});let s=Number(t.id);if(Number.isNaN(s))return u.NextResponse.json({message:"ID inv\xe1lido"},{status:400});try{let e=await i._.futureEntry.findUnique({where:{id:s}});if(!e||e.userId!==r)return u.NextResponse.json({message:"Lan\xe7amento futuro n\xe3o encontrado"},{status:404});return await i._.futureEntry.delete({where:{id:s}}),u.NextResponse.json({},{status:204})}catch(e){return console.error("Erro ao excluir lan\xe7amento futuro",e),u.NextResponse.json({message:"Erro interno ao excluir lan\xe7amento futuro"},{status:500})}}let x=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/future-entries/[id]/route",pathname:"/api/future-entries/[id]",filename:"route",bundlePath:"app/api/future-entries/[id]/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\controle-gastos\\backend\\app\\api\\future-entries\\[id]\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:v,serverHooks:h}=x,y="/api/future-entries/[id]/route";function R(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:v})}},9178:(e,t,r)=>{r.d(t,{R:()=>o,W:()=>u});var s=r(1482),n=r.n(s);let a=process.env.JWT_SECRET||"change-me";function o(e){return n().sign({userId:e},a,{expiresIn:"7d"})}function u(e){if(!e||!e.startsWith("Bearer "))return null;let t=e.split(" ")[1];try{return n().verify(t,a).userId}catch(e){return null}}},1501:(e,t,r)=>{r.d(t,{I:()=>s});function s(e){let t=e.amount&&"function"==typeof e.amount.toNumber?e.amount.toNumber():Number(e.amount);return{id:e.id,title:e.title,amount:t,category:e.category,dueDate:e.dueDate,type:e.type,userId:e.userId,createdAt:e.createdAt,updatedAt:e.updatedAt}}},3493:(e,t,r)=>{r.d(t,{_:()=>n});let s=require("@prisma/client"),n=globalThis.prisma||new s.PrismaClient({log:["error","warn"]})}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,547],()=>r(4216));module.exports=s})();