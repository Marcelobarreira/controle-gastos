"use strict";(()=>{var e={};e.id=52,e.ids=[52],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},1254:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>N,patchFetch:()=>R,requestAsyncStorage:()=>g,routeModule:()=>x,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{DELETE:()=>m,GET:()=>d,POST:()=>y,dynamic:()=>p,revalidate:()=>l});var a=t(9303),o=t(8716),n=t(670),i=t(7070),u=t(3493),c=t(9178);let p="force-dynamic",l=0;async function d(e){let r=(0,c.W)(e.headers.get("authorization"));if(!r)return i.NextResponse.json({message:"N\xe3o autorizado"},{status:401});try{let e=await u._.payCycle.findMany({where:{userId:r},orderBy:{payDay:"asc"}});return i.NextResponse.json(e)}catch(e){return console.error("Erro ao listar ciclos",e),i.NextResponse.json({message:"Erro interno ao listar ciclos"},{status:500})}}async function y(e){let r=(0,c.W)(e.headers.get("authorization"));if(!r)return i.NextResponse.json({message:"N\xe3o autorizado"},{status:401});let{name:t,payDay:s}=await e.json(),a=Number(s);if(!t||Number.isNaN(a)||a<1||a>31)return i.NextResponse.json({message:"Informe nome e dia entre 1 e 31"},{status:400});try{let e=await u._.payCycle.create({data:{name:t,payDay:a,userId:r}});return i.NextResponse.json(e,{status:201})}catch(e){return console.error("Erro ao criar ciclo",e),i.NextResponse.json({message:"Erro ao criar ciclo"},{status:500})}}async function m(e){let r=new URL(e.url).searchParams.get("id"),t=(0,c.W)(e.headers.get("authorization"));if(!t)return i.NextResponse.json({message:"N\xe3o autorizado"},{status:401});let s=Number(r);if(Number.isNaN(s))return i.NextResponse.json({message:"ID inv\xe1lido"},{status:400});try{let e=await u._.payCycle.findUnique({where:{id:s}});if(!e||e.userId!==t)return i.NextResponse.json({message:"Ciclo de pagamento n\xe3o encontrado"},{status:404});return await u._.payCycle.delete({where:{id:s}}),i.NextResponse.json({},{status:204})}catch(e){return console.error("Erro ao excluir ciclo",e),i.NextResponse.json({message:"Erro ao excluir ciclo"},{status:500})}}let x=new a.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/pay-cycles/route",pathname:"/api/pay-cycles",filename:"route",bundlePath:"app/api/pay-cycles/route"},resolvedPagePath:"C:\\Users\\User\\Desktop\\controle-gastos\\backend\\app\\api\\pay-cycles\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:f}=x,N="/api/pay-cycles/route";function R(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},9178:(e,r,t)=>{t.d(r,{R:()=>n,W:()=>i});var s=t(1482),a=t.n(s);let o=process.env.JWT_SECRET||"change-me";function n(e){return a().sign({userId:e},o,{expiresIn:"7d"})}function i(e){if(!e||!e.startsWith("Bearer "))return null;let r=e.split(" ")[1];try{return a().verify(r,o).userId}catch(e){return null}}},3493:(e,r,t)=>{t.d(r,{_:()=>a});let s=require("@prisma/client"),a=globalThis.prisma||new s.PrismaClient({log:["error","warn"]})}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,547],()=>t(1254));module.exports=s})();